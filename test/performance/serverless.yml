service: aws-streams-perf

provider:
  name: aws
  runtime: nodejs8.10
  iamRoleStatements:
    - Effect: Allow
      Action: sqs:*
      Resource:
        Fn::GetAtt:
          - Queue
          - Arn

functions:
  enqueue:
    handler: enqueue.handler
    timeout: 60
    memorySize: ${opt:memory}
    environment:
      CONCURRENCY: ${opt:concurrency}
      QUEUE_URL:
        Ref: Queue

resources:
  Resources:
    Queue:
      Type: AWS::SQS::Queue